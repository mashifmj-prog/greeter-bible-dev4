<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Greeter - Community & Scalability</title>
    <link rel="manifest" href="/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Crimson+Text:wght@400;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* === SCALABILITY CSS VARIABLES === */
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #2c3e50;
            --accent-color: #e67e22;
            --success-color: #27ae60;
            --community-color: #9b59b6;
            --offline-color: #95a5a6;
            --analytics-color: #3498db;
            --background-color: #f8f9fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --border-radius: 16px;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            
            /* Font Variables */
            --font-primary: 'Inter', 'Segoe UI', system-ui, sans-serif;
            --font-heading: 'Playfair Display', 'Times New Roman', serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.7;
            font-family: var(--font-primary);
            font-weight: 400;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px 30px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-family: var(--font-heading);
            font-weight: 700;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 40px;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            margin-bottom: 30px;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            color: white;
            padding: 25px;
        }

        .card-header.community {
            background: linear-gradient(135deg, var(--community-color), #8e44ad);
        }

        .card-header.offline {
            background: linear-gradient(135deg, var(--offline-color), #7f8c8d);
        }

        .card-header.analytics {
            background: linear-gradient(135deg, var(--analytics-color), #2980b9);
        }

        .card-header.global {
            background: linear-gradient(135deg, var(--accent-color), #d35400);
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .card-content {
            padding: 30px;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-community {
            background: var(--community-color);
            color: white;
        }

        .btn-community:hover {
            background: #8e44ad;
            transform: translateY(-2px);
        }

        /* === PHASE 4.1: SOCIAL FEATURES === */
        
        /* Prayer Groups */
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .group-card {
            background: var(--background-color);
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .group-card:hover {
            border-color: var(--community-color);
            transform: translateY(-3px);
        }

        .group-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .group-members {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }

        .member-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary-color);
            margin-left: -8px;
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .member-avatar:first-child {
            margin-left: 0;
        }

        /* Prayer Requests */
        .prayer-requests {
            max-height: 400px;
            overflow-y: auto;
        }

        .prayer-request {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            border-left: 4px solid var(--community-color);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .request-author {
            font-weight: 600;
        }

        .request-time {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .request-content {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .request-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: var(--card-bg);
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Testimony Sharing */
        .testimonies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .testimony-card {
            background: var(--background-color);
            padding: 25px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .testimony-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .testimony-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .testimony-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--community-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .testimony-meta {
            flex: 1;
        }

        .testimony-author {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .testimony-date {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Verse Challenges */
        .challenges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .challenge-card {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .challenge-card.active {
            background: var(--community-color);
            color: white;
        }

        .challenge-card:hover {
            transform: translateY(-3px);
        }

        .challenge-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .challenge-progress {
            height: 6px;
            background: rgba(0,0,0,0.1);
            border-radius: 3px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: currentColor;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* === PHASE 4.2: ADVANCED CAPABILITIES === */
        
        /* Offline Status */
        .offline-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-online {
            background: var(--success-color);
            animation: pulse 2s infinite;
        }

        .status-offline {
            background: var(--offline-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Cache Management */
        .cache-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .cache-stat {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .cache-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .cache-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Push Notifications */
        .notification-settings {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .notification-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--background-color);
            border-radius: var(--border-radius);
        }

        .notification-info {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .notification-desc {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Multi-language Support */
        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .language-option {
            padding: 20px 15px;
            border: 2px solid var(--background-color);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .language-option.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }

        .language-option:hover {
            transform: translateY(-2px);
        }

        .language-flag {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        /* Advanced Analytics */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .analytics-card {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .analytics-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--analytics-color);
            margin-bottom: 5px;
        }

        .analytics-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .privacy-badge {
            display: inline-block;
            background: var(--success-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .groups-grid,
            .testimonies-grid,
            .challenges-grid {
                grid-template-columns: 1fr;
            }
            
            .cache-stats,
            .analytics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .language-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Main App Container -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåç Bible Greeter Community</h1>
            <p>Connect, grow, and share your faith journey</p>
        </div>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Left Column - Community Features -->
            <div class="content-area">
                <!-- Prayer Groups -->
                <div class="card">
                    <div class="card-header community">
                        <div class="card-title">üôè Prayer Groups</div>
                        <div class="card-subtitle">Join local prayer communities</div>
                    </div>
                    <div class="card-content">
                        <div class="groups-grid">
                            <div class="group-card" data-group="church">
                                <div class="group-icon">üíí</div>
                                <div class="group-name">Church Family</div>
                                <div class="group-members">
                                    <div class="member-avatar">JD</div>
                                    <div class="member-avatar">SJ</div>
                                    <div class="member-avatar">MP</div>
                                    <div class="member-avatar">+5</div>
                                </div>
                                <div class="group-stats">12 members ‚Ä¢ 8 active</div>
                            </div>
                            <div class="group-card" data-group="family">
                                <div class="group-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                                <div class="group-name">Family Prayer</div>
                                <div class="group-members">
                                    <div class="member-avatar">JD</div>
                                    <div class="member-avatar">SJ</div>
                                    <div class="member-avatar">MJ</div>
                                </div>
                                <div class="group-stats">8 members ‚Ä¢ 6 active</div>
                            </div>
                            <div class="group-card" data-group="youth">
                                <div class="group-icon">üåü</div>
                                <div class="group-name">Youth Bible Study</div>
                                <div class="group-members">
                                    <div class="member-avatar">TJ</div>
                                    <div class="member-avatar">EK</div>
                                    <div class="member-avatar">+10</div>
                                </div>
                                <div class="group-stats">15 members ‚Ä¢ 12 active</div>
                            </div>
                        </div>

                        <!-- Prayer Requests -->
                        <h3 class="mt-20 mb-20">üìù Recent Prayer Requests</h3>
                        <div class="prayer-requests">
                            <div class="prayer-request">
                                <div class="request-header">
                                    <div class="request-author">Sarah Johnson</div>
                                    <div class="request-time">2 hours ago</div>
                                </div>
                                <div class="request-content">
                                    Please pray for my friend Maria who is recovering from surgery. She needs strength and healing during this time.
                                </div>
                                <div class="request-actions">
                                    <button class="action-btn">üôè Pray</button>
                                    <button class="action-btn">üí¨ Encourage</button>
                                    <button class="action-btn">üîÑ Share</button>
                                </div>
                            </div>
                            <div class="prayer-request">
                                <div class="request-header">
                                    <div class="request-author">Mike Peterson</div>
                                    <div class="request-time">5 hours ago</div>
                                </div>
                                <div class="request-content">
                                    Seeking guidance for an important career decision. Wisdom and clarity needed for the path ahead.
                                </div>
                                <div class="request-actions">
                                    <button class="action-btn">üôè Pray</button>
                                    <button class="action-btn">üí¨ Encourage</button>
                                    <button class="action-btn">üîÑ Share</button>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-community" style="width: 100%; margin-top: 20px;">
                            + Add Prayer Request
                        </button>
                    </div>
                </div>

                <!-- Testimony Sharing -->
                <div class="card">
                    <div class="card-header community">
                        <div class="card-title">üåü Testimony Sharing</div>
                        <div class="card-subtitle">Share what God is doing in your life</div>
                    </div>
                    <div class="card-content">
                        <div class="testimonies-grid">
                            <div class="testimony-card">
                                <div class="testimony-header">
                                    <div class="testimony-avatar">SJ</div>
                                    <div class="testimony-meta">
                                        <div class="testimony-author">Sarah Johnson</div>
                                        <div class="testimony-date">3 days ago</div>
                                    </div>
                                </div>
                                <div class="testimony-content">
                                    God answered our prayers for healing! My mother's test results came back clear today. Thank you everyone for praying!
                                </div>
                                <div class="testimony-actions">
                                    <button class="action-btn">üëç 12</button>
                                    <button class="action-btn">üí¨ 3</button>
                                </div>
                            </div>
                            <div class="testimony-card">
                                <div class="testimony-header">
                                    <div class="testimony-avatar">MP</div>
                                    <div class="testimony-meta">
                                        <div class="testimony-author">Mike Peterson</div>
                                        <div class="testimony-date">1 week ago</div>
                                    </div>
                                </div>
                                <div class="testimony-content">
                                    After months of unemployment, God provided the perfect job opportunity! Trust in His timing!
                                </div>
                                <div class="testimony-actions">
                                    <button class="action-btn">üëç 24</button>
                                    <button class="action-btn">üí¨ 8</button>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-community" style="width: 100%; margin-top: 20px;">
                            ‚úçÔ∏è Share Your Testimony
                        </button>
                    </div>
                </div>

                <!-- Verse Challenges -->
                <div class="card">
                    <div class="card-header community">
                        <div class="card-title">üéØ Verse Challenges</div>
                        <div class="card-subtitle">Community Bible engagement</div>
                    </div>
                    <div class="card-content">
                        <div class="challenges-grid">
                            <div class="challenge-card active">
                                <div class="challenge-icon">üìñ</div>
                                <div class="challenge-title">7-Day Psalms</div>
                                <div class="challenge-progress">
                                    <div class="progress-fill" style="width: 85%"></div>
                                </div>
                                <div class="challenge-stats">6/7 days completed</div>
                            </div>
                            <div class="challenge-card">
                                <div class="challenge-icon">üí™</div>
                                <div class="challenge-title">Memory Marathon</div>
                                <div class="challenge-progress">
                                    <div class="progress-fill" style="width: 60%"></div>
                                </div>
                                <div class="challenge-stats">3/5 verses memorized</div>
                            </div>
                            <div class="challenge-card">
                                <div class="challenge-icon">üôè</div>
                                <div class="challenge-title">Prayer Warrior</div>
                                <div class="challenge-progress">
                                    <div class="progress-fill" style="width: 30%"></div>
                                </div>
                                <div class="challenge-stats">3/10 days completed</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <div style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 15px;">
                                Community Progress: 142 people participating
                            </div>
                            <button class="btn btn-primary">Join Challenge</button>
                            <button class="btn btn-secondary" style="margin-left: 10px;">Create Challenge</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Advanced Capabilities -->
            <div class="sidebar">
                <!-- Offline PWA -->
                <div class="card">
                    <div class="card-header offline">
                        <div class="card-title">üì± Offline PWA</div>
                        <div class="card-subtitle">Works anywhere, anytime</div>
                    </div>
                    <div class="card-content">
                        <div class="offline-status">
                            <div class="status-indicator status-online"></div>
                            <div>Online - All features available</div>
                        </div>

                        <div class="cache-stats">
                            <div class="cache-stat">
                                <div class="cache-number">42</div>
                                <div class="cache-label">Verses Cached</div>
                            </div>
                            <div class="cache-stat">
                                <div class="cache-number">15</div>
                                <div class="cache-label">Devotionals</div>
                            </div>
                            <div class="cache-stat">
                                <div class="cache-number">8.7MB</div>
                                <div class="cache-label">Storage Used</div>
                            </div>
                            <div class="cache-stat">
                                <div class="cache-number">7 days</div>
                                <div class="cache-label">Offline Access</div>
                            </div>
                        </div>

                        <button class="btn btn-primary" style="width: 100%;">
                            ‚¨áÔ∏è Download for Offline
                        </button>
                    </div>
                </div>

                <!-- Push Notifications -->
                <div class="card">
                    <div class="card-header offline">
                        <div class="card-title">üîî Push Notifications</div>
                        <div class="card-subtitle">Stay connected and motivated</div>
                    </div>
                    <div class="card-content">
                        <div class="notification-settings">
                            <div class="notification-item">
                                <div class="notification-info">
                                    <div class="notification-title">Daily Verse</div>
                                    <div class="notification-desc">Receive a new verse each day</div>
                                </div>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="notification-item">
                                <div class="notification-info">
                                    <div class="notification-title">Prayer Reminders</div>
                                    <div class="notification-desc">Daily prayer time alerts</div>
                                </div>
                                <label class="toggle">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="notification-item">
                                <div class="notification-info">
                                    <div class="notification-title">Group Updates</div>
                                    <div class="notification-desc">Prayer group activities</div>
                                </div>
                                <label class="toggle">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%;">
                            ‚öôÔ∏è Notification Settings
                        </button>
                    </div>
                </div>

                <!-- Multi-language Support -->
                <div class="card">
                    <div class="card-header global">
                        <div class="card-title">üåê Multi-language</div>
                        <div class="card-subtitle">Global accessibility</div>
                    </div>
                    <div class="card-content">
                        <div class="language-grid">
                            <div class="language-option active">
                                <div class="language-flag">üá∫üá∏</div>
                                <div>English</div>
                            </div>
                            <div class="language-option">
                                <div class="language-flag">üá™üá∏</div>
                                <div>Espa√±ol</div>
                            </div>
                            <div class="language-option">
                                <div class="language-flag">üá´üá∑</div>
                                <div>Fran√ßais</div>
                            </div>
                            <div class="language-option">
                                <div class="language-flag">üá©üá™</div>
                                <div>Deutsch</div>
                            </div>
                            <div class="language-option">
                                <div class="language-flag">üáµüáπ</div>
                                <div>Portugu√™s</div>
                            </div>
                            <div class="language-option">
                                <div class="language-flag">üá®üá≥</div>
                                <div>‰∏≠Êñá</div>
                            </div>
                        </div>
                        <div style="background: var(--background-color); padding: 20px; border-radius: var(--border-radius); margin-top: 15px;">
                            <div style="font-weight: 600; margin-bottom: 10px;">Sample Translation:</div>
                            <div style="line-height: 1.6; font-style: italic;">
                                "For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, plans to give you hope and a future."
                            </div>
                            <div style="text-align: right; color: var(--primary-color); margin-top: 10px; font-size: 0.9rem;">
                                Jeremiah 29:11
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics -->
                <div class="card">
                    <div class="card-header analytics">
                        <div class="card-title">üìä Advanced Analytics <span class="privacy-badge">PRIVACY-FOCUSED</span></div>
                        <div class="card-subtitle">Insights with privacy protection</div>
                    </div>
                    <div class="card-content">
                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <div class="analytics-value">87%</div>
                                <div class="analytics-label">Engagement</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">42</div>
                                <div class="analytics-label">Active Days</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">156</div>
                                <div class="analytics-label">Prayers</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">28</div>
                                <div class="analytics-label">Friends</div>
                            </div>
                        </div>
                        <div style="background: var(--background-color); padding: 20px; border-radius: var(--border-radius); margin-top: 15px;">
                            <div style="text-align: center;">
                                <div style="font-weight: 600; margin-bottom: 10px;">Weekly Activity</div>
                                <div style="display: flex; justify-content: space-between; align-items: end; height: 60px; margin: 20px 0;">
                                    <div style="width: 12%; background: var(--analytics-color); height: 40%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 60%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 80%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 100%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 70%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 90%; border-radius: 2px;"></div>
                                    <div style="width: 12%; background: var(--analytics-color); height: 50%; border-radius: 2px;"></div>
                                </div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">All data anonymized and encrypted</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === PHASE 4: SCALABILITY & COMMUNITY SYSTEM ===
        class CommunitySystem {
            constructor() {
                this.prayerGroups = [];
                this.testimonies = [];
                this.challenges = [];
                this.currentLanguage = 'en';
                this.offlineEnabled = false;
                this.notificationsEnabled = false;
                this.init();
            }

            init() {
                this.setupCommunityFeatures();
                this.setupOfflineCapabilities();
                this.setupMultiLanguage();
                this.setupAnalytics();
                this.loadCommunityData();
                console.log('üåç Community System initialized!');
            }

            // === PHASE 4.1: SOCIAL FEATURES ===

            setupCommunityFeatures() {
                this.setupPrayerGroups();
                this.setupTestimonySharing();
                this.setupVerseChallenges();
                this.setupEncourageFriends();
            }

            setupPrayerGroups() {
                // Prayer group interactions
                document.querySelectorAll('.group-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        const groupId = e.currentTarget.dataset.group;
                        this.openPrayerGroup(groupId);
                    });
                });

                // Prayer request actions
                document.querySelectorAll('.action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const action = e.target.textContent;
                        this.handlePrayerAction(action, e.target.closest('.prayer-request'));
                    });
                });

                // Add prayer request
                document.querySelector('.btn-community')?.addEventListener('click', () => {
                    this.showAddPrayerModal();
                });
            }

            setupTestimonySharing() {
                // Testimony interactions
                document.querySelectorAll('.testimony-actions .action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const action = e.target.textContent;
                        this.handleTestimonyAction(action, e.target.closest('.testimony-card'));
                    });
                });

                // Share testimony
                document.querySelectorAll('.btn-community')[1]?.addEventListener('click', () => {
                    this.showShareTestimonyModal();
                });
            }

            setupVerseChallenges() {
                // Challenge interactions
                document.querySelectorAll('.challenge-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        const challenge = e.currentTarget.querySelector('.challenge-title').textContent;
                        this.joinChallenge(challenge);
                    });
                });

                // Join challenge button
                document.querySelector('.btn-primary')?.addEventListener('click', () => {
                    const activeChallenge = document.querySelector('.challenge-card.active .challenge-title').textContent;
                    this.joinChallenge(activeChallenge);
                });
            }

            setupEncourageFriends() {
                // This would integrate with existing friend system
                console.log('üíù Encourage friends system ready');
            }

            openPrayerGroup(groupId) {
                const groupNames = {
                    church: 'Church Family',
                    family: 'Family Prayer', 
                    youth: 'Youth Bible Study'
                };
                
                this.showNotification(`Opening ${groupNames[groupId]} prayer group`);
                // In full implementation, this would navigate to group chat
            }

            handlePrayerAction(action, prayerElement) {
                const author = prayerElement.querySelector('.request-author').textContent;
                
                switch(action) {
                    case 'üôè Pray':
                        this.recordPrayer(author);
                        break;
                    case 'üí¨ Encourage':
                        this.sendEncouragement(author);
                        break;
                    case 'üîÑ Share':
                        this.sharePrayerRequest(author);
                        break;
                }
            }

            handleTestimonyAction(action, testimonyElement) {
                const currentCount = parseInt(action.match(/\d+/)?.[0]) || 0;
                const newAction = action.replace(/\d+/, currentCount + 1);
                testimonyElement.querySelector('.action-btn').textContent = newAction;
                
                this.showNotification('Interaction recorded!');
            }

            joinChallenge(challengeName) {
                this.showNotification(`üéØ Joined ${challengeName}! Tracking your progress...`);
                
                // Update challenge progress
                const challengeCard = document.querySelector('.challenge-card.active');
                const progressBar = challengeCard.querySelector('.progress-fill');
                const stats = challengeCard.querySelector('.challenge-stats');
                
                // Simulate progress update
                setTimeout(() => {
                    progressBar.style.width = '95%';
                    stats.textContent = '7/7 days completed';
                    this.showNotification('üéâ Challenge completed! Well done!');
                }, 2000);
            }

            recordPrayer(author) {
                this.showNotification(`üôè Prayed for ${author}'s request`);
                this.logCommunityActivity('prayer', author);
            }

            sendEncouragement(author) {
                const message = prompt(`Send an encouraging message to ${author}:`);
                if (message) {
                    this.showNotification(`üíù Encouragement sent to ${author}`);
                    this.logCommunityActivity('encouragement', author);
                }
            }

            sharePrayerRequest(author) {
                this.showNotification(`üîÑ Shared ${author}'s prayer request`);
                this.logCommunityActivity('share', author);
            }

            showAddPrayerModal() {
                const title = prompt('Prayer request title:');
                if (title) {
                    const content = prompt('Prayer request details:');
                    if (content) {
                        this.addPrayerRequest(title, content);
                    }
                }
            }

            showShareTestimonyModal() {
                const title = prompt('Testimony title:');
                if (title) {
                    const content = prompt('Share what God has done:');
                    if (content) {
                        this.shareTestimony(title, content);
                    }
                }
            }

            addPrayerRequest(title, content) {
                this.showNotification('üìù Prayer request added to the community');
                this.logCommunityActivity('prayer_request', title);
            }

            shareTestimony(title, content) {
                this.showNotification('üåü Testimony shared with the community');
                this.logCommunityActivity('testimony', title);
            }

            // === PHASE 4.2: ADVANCED CAPABILITIES ===

            setupOfflineCapabilities() {
                this.checkOnlineStatus();
                this.setupServiceWorker();
                this.setupCacheManagement();
                
                // Listen for online/offline events
                window.addEventListener('online', () => this.handleOnlineStatus(true));
                window.addEventListener('offline', () => this.handleOnlineStatus(false));
            }

            setupServiceWorker() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log('üì± Service Worker registered');
                            this.offlineEnabled = true;
                            this.updateOfflineStatus();
                        })
                        .catch(error => {
                            console.log('üì± Service Worker registration failed:', error);
                        });
                }
            }

            setupCacheManagement() {
                // Cache management controls
                document.querySelector('.btn-primary')?.addEventListener('click', () => {
                    this.downloadOfflineContent();
                });
            }

            checkOnlineStatus() {
                this.isOnline = navigator.onLine;
                this.updateOfflineStatus();
            }

            handleOnlineStatus(online) {
                this.isOnline = online;
                this.updateOfflineStatus();
                
                if (online) {
                    this.showNotification('üåê Back online - Syncing data...');
                    this.syncOfflineData();
                } else {
                    this.showNotification('üì¥ Offline mode - Using cached content');
                }
            }

            updateOfflineStatus() {
                const statusIndicator = document.querySelector('.status-indicator');
                const statusText = document.querySelector('.offline-status div:last-child');
                
                if (this.isOnline) {
                    statusIndicator.className = 'status-indicator status-online';
                    statusText.textContent = 'Online - All features available';
                } else {
                    statusIndicator.className = 'status-indicator status-offline';
                    statusText.textContent = 'Offline - Limited features';
                }
            }

            downloadOfflineContent() {
                this.showNotification('‚¨áÔ∏è Downloading content for offline use...');
                
                // Simulate download progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 10;
                    if (progress >= 100) {
                        clearInterval(interval);
                        this.showNotification('‚úÖ Offline content ready!');
                        this.offlineEnabled = true;
                    }
                }, 200);
            }

            syncOfflineData() {
                // Sync any locally stored data when coming back online
                setTimeout(() => {
                    this.showNotification('‚úÖ All data synced successfully');
                }, 1500);
            }

            setupMultiLanguage() {
                this.loadLanguagePreference();
                this.setupLanguageSelector();
                this.applyLanguage(this.currentLanguage);
            }

            loadLanguagePreference() {
                const savedLang = localStorage.getItem('bibleGreeter_language');
                if (savedLang) {
                    this.currentLanguage = savedLang;
                }
            }

            setupLanguageSelector() {
                document.querySelectorAll('.language-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        const language = e.currentTarget.textContent.trim();
                        this.selectLanguage(language);
                    });
                });
            }

            selectLanguage(language) {
                document.querySelectorAll('.language-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                document.querySelector(`.language-option:contains("${language}")`).classList.add('active');
                
                this.currentLanguage = this.getLanguageCode(language);
                this.applyLanguage(this.currentLanguage);
                this.saveLanguagePreference();
                
                this.showNotification(`üåê Language changed to ${language}`);
            }

            getLanguageCode(language) {
                const codes = {
                    'English': 'en',
                    'Espa√±ol': 'es',
                    'Fran√ßais': 'fr',
                    'Deutsch': 'de',
                    'Portugu√™s': 'pt',
                    '‰∏≠Êñá': 'zh'
                };
                return codes[language] || 'en';
            }

            applyLanguage(languageCode) {
                // In a full implementation, this would update all text content
                console.log(`Applying language: ${languageCode}`);
                // This would typically involve fetching translation files and updating DOM
            }

            saveLanguagePreference() {
                localStorage.setItem('bibleGreeter_language', this.currentLanguage);
            }

            setupAnalytics() {
                this.setupPrivacyAnalytics();
                this.updateAnalyticsDisplay();
            }

            setupPrivacyAnalytics() {
                // Privacy-focused analytics setup
                document.querySelectorAll('.toggle input').forEach(toggle => {
                    toggle.addEventListener('change', (e) => {
                        this.updatePrivacySettings(e.target.checked, e.target.closest('.notification-item').querySelector('.notification-title').textContent);
                    });
                });
            }

            updatePrivacySettings(enabled, setting) {
                if (enabled) {
                    this.logAnalyticsEvent(`setting_enabled`, setting);
                    this.showNotification(`‚úÖ ${setting} enabled`);
                } else {
                    this.logAnalyticsEvent(`setting_disabled`, setting);
                    this.showNotification(`‚ùå ${setting} disabled`);
                }
            }

            updateAnalyticsDisplay() {
                // Update analytics numbers with realistic data
                const analyticsValues = document.querySelectorAll('.analytics-value');
                if (analyticsValues.length >= 4) {
                    analyticsValues[0].textContent = '87%';
                    analyticsValues[1].textContent = '42';
                    analyticsValues[2].textContent = '156';
                    analyticsValues[3].textContent = '28';
                }
            }

            // === UTILITY METHODS ===

            loadCommunityData() {
                // Load community data from local storage or API
                this.prayerGroups = JSON.parse(localStorage.getItem('bg_community_groups') || '[]');
                this.testimonies = JSON.parse(localStorage.getItem('bg_community_testimonies') || '[]');
                this.challenges = JSON.parse(localStorage.getItem('bg_community_challenges') || '[]');
            }

            logCommunityActivity(type, details) {
                const activity = {
                    type,
                    details,
                    timestamp: new Date().toISOString(),
                    anonymousId: this.getAnonymousUserId()
                };

                // Store locally
                const activities = JSON.parse(localStorage.getItem('bg_community_activities') || '[]');
                activities.push(activity);
                localStorage.setItem('bg_community_activities', JSON.stringify(activities.slice(-100))); // Keep last 100

                this.logAnalyticsEvent('community_activity', type);
            }

            logAnalyticsEvent(category, action) {
                // Privacy-focused analytics - no personal data
                const event = {
                    category,
                    action,
                    timestamp: Date.now(),
                    anonymousId: this.getAnonymousUserId(),
                    language: this.currentLanguage,
                    online: this.isOnline
                };

                console.log('üìä Analytics Event:', event);
                
                // In production, this would send to analytics service
                // while respecting privacy settings
            }

            getAnonymousUserId() {
                let userId = localStorage.getItem('bg_anonymous_user_id');
                if (!userId) {
                    userId = 'user_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('bg_anonymous_user_id', userId);
                }
                return userId;
            }

            showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: var(--community-color);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: var(--shadow);
                    z-index: 1000;
                    font-weight: 600;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // Initialize Community System
        let communitySystem;

        // Update main app initialization
        class BibleApp {
            constructor() {
                // Initialize all previous systems
                this.contentSystem = new ContentSystem();
                this.sharingService = new SharingService();
                this.journalSystem = new JournalSystem();
                this.advancedFeatures = new AdvancedFeatures();
                this.securitySystem = new SecuritySystem();
                
                // Initialize community system last
                communitySystem = new CommunitySystem();
                
                window.communitySystem = communitySystem;
                
                this.init();
            }

            init() {
                console.log('üåç Bible Greeter App initialized with Community & Scalability!');
                
                // Additional community-aware initializations
                this.setupGlobalFeatures();
            }

            setupGlobalFeatures() {
                // Setup any global community features
                this.setupPushNotifications();
            }

            setupPushNotifications() {
                if ('Notification' in window && Notification.permission === 'default') {
                    // Request notification permission
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            console.log('üîî Push notifications enabled');
                        }
                    });
                }
            }
        }

        // Start the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new BibleApp();
        });

        // Service Worker for PWA (simulated)
        if ('serviceWorker' in navigator) {
            // In a real app, this would register an actual service worker
            console.log('üì± PWA Service Worker ready for registration');
        }

        // Enhanced contains selector for language options
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function() {
                const language = this.textContent.trim();
                communitySystem.selectLanguage(language);
            });
        });
    </script>
</body>
</html>
