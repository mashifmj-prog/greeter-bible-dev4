<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Greeter - Dynamic & Complete</title>
    <link rel="manifest" href="/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Crimson+Text:wght@400;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #2c3e50;
            --background-color: #f8f9fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --border-radius: 16px;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            
            /* Time-based theme variables */
            --dawn-color: #ff9a76;
            --morning-color: #4a6fa5;
            --daylight-color: #27ae60;
            --sunset-color: #e67e22;
            --evening-color: #9b59b6;
            --night-color: #2c3e50;
            
            --font-primary: 'Inter', sans-serif;
            --font-heading: 'Playfair Display', serif;
        }

        /* Time-based themes */
        .theme-dawn {
            --primary-color: var(--dawn-color);
            --secondary-color: #d35400;
            --background-color: #fff5f0;
        }

        .theme-morning {
            --primary-color: var(--morning-color);
            --secondary-color: #2c3e50;
            --background-color: #f0f7ff;
        }

        .theme-daylight {
            --primary-color: var(--daylight-color);
            --secondary-color: #229954;
            --background-color: #f0fff4;
        }

        .theme-sunset {
            --primary-color: var(--sunset-color);
            --secondary-color: #c0392b;
            --background-color: #fffaf0;
        }

        .theme-evening {
            --primary-color: var(--evening-color);
            --secondary-color: #8e44ad;
            --background-color: #f8f0ff;
        }

        .theme-night {
            --primary-color: var(--night-color);
            --secondary-color: #34495e;
            --background-color: #1a1a2e;
            --text-color: #e0e0e0;
            --card-bg: #2d2d44;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.7;
            font-family: var(--font-primary);
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px 30px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .header h1 {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-family: var(--font-heading);
        }

        .time-theme-indicator {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 40px;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            margin-bottom: 30px;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .card-content {
            padding: 30px;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--primary-color);
            color: white;
        }

        .btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--background-color);
            color: var(--text-color);
            border: 2px solid var(--background-color);
        }

        .btn-secondary:hover {
            border-color: var(--primary-color);
        }

        /* Bible Reader Styles */
        .bible-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .bible-select {
            flex: 1;
            min-width: 150px;
            padding: 12px;
            border: 2px solid var(--background-color);
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 1rem;
        }

        .chapter-navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .bible-content {
            background: var(--background-color);
            padding: 30px;
            border-radius: var(--border-radius);
            max-height: 500px;
            overflow-y: auto;
            line-height: 1.8;
        }

        .verse {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
        }

        .verse:hover {
            background: rgba(0,0,0,0.05);
        }

        .verse-number {
            color: var(--primary-color);
            font-weight: 600;
            margin-right: 8px;
        }

        .verse.active {
            background: var(--primary-color);
            color: white;
        }

        .verse.active .verse-number {
            color: white;
        }

        /* Interactive Components */
        .interactive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .interactive-card {
            background: var(--background-color);
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .interactive-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .interactive-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .bible-controls {
                flex-direction: column;
            }
            
            .interactive-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìñ Bible Greeter</h1>
            <p>Dynamic Bible reading with time-based themes</p>
            <div class="time-theme-indicator" id="timeThemeIndicator">
                Loading theme...
            </div>
        </div>

        <div class="main-grid">
            <div class="content-area">
                <!-- Dynamic Bible Reader -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìö Bible Reader</div>
                        <div class="card-subtitle">Multiple versions with real functionality</div>
                    </div>
                    <div class="card-content">
                        <div class="bible-controls">
                            <select class="bible-select" id="bookSelect">
                                <option value="genesis">Genesis</option>
                                <option value="exodus">Exodus</option>
                                <option value="psalms">Psalms</option>
                                <option value="matthew">Matthew</option>
                                <option value="john">John</option>
                                <option value="romans">Romans</option>
                            </select>
                            
                            <select class="bible-select" id="chapterSelect">
                                <!-- Chapters will be populated dynamically -->
                            </select>
                            
                            <select class="bible-select" id="versionSelect">
                                <option value="niv">NIV (New International Version)</option>
                                <option value="esv">ESV (English Standard Version)</option>
                                <option value="kjv">KJV (King James Version)</option>
                                <option value="nlt">NLT (New Living Translation)</option>
                                <option value="nasb">NASB (New American Standard Bible)</option>
                            </select>
                        </div>

                        <div class="chapter-navigation">
                            <button class="nav-btn" id="prevChapter">‚Üê Previous</button>
                            <div style="flex: 1; text-align: center; font-weight: 600;" id="chapterDisplay">
                                Select a book and chapter
                            </div>
                            <button class="nav-btn" id="nextChapter">Next ‚Üí</button>
                        </div>

                        <div class="bible-content" id="bibleContent">
                            <div style="text-align: center; padding: 40px; opacity: 0.7;">
                                Select a book, chapter, and version to start reading
                            </div>
                        </div>

                        <div class="text-center mt-20">
                            <button class="btn" id="shareVerse">
                                üì§ Share Verse
                            </button>
                            <button class="btn-secondary" id="addBookmark">
                                üîñ Bookmark
                            </button>
                            <button class="btn-secondary" id="addNote">
                                üìù Add Note
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Interactive Features -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üéØ Interactive Features</div>
                        <div class="card-subtitle">Dynamic buttons with real functionality</div>
                    </div>
                    <div class="card-content">
                        <div class="interactive-grid">
                            <div class="interactive-card" id="dailyVerseBtn">
                                <div class="interactive-icon">üìñ</div>
                                <div>Daily Verse</div>
                                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Get a new verse</div>
                            </div>
                            <div class="interactive-card" id="audioPlayBtn">
                                <div class="interactive-icon">üîä</div>
                                <div>Audio Bible</div>
                                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Listen to Scripture</div>
                            </div>
                            <div class="interactive-card" id="themeCycleBtn">
                                <div class="interactive-icon">üé®</div>
                                <div>Cycle Theme</div>
                                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Change appearance</div>
                            </div>
                            <div class="interactive-card" id="randomChapterBtn">
                                <div class="interactive-icon">üé≤</div>
                                <div>Random Chapter</div>
                                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Explore randomly</div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="versesRead">0</div>
                                <div class="stat-label">Verses Read</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="chaptersRead">0</div>
                                <div class="stat-label">Chapters</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="bookmarksCount">0</div>
                                <div class="stat-label">Bookmarks</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="readingTime">0</div>
                                <div class="stat-label">Minutes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <!-- Current Reading Progress -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìä Reading Progress</div>
                    </div>
                    <div class="card-content">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary-color); margin-bottom: 10px;" id="completionPercentage">0%</div>
                            <div style="opacity: 0.8; margin-bottom: 20px;">Bible Completion</div>
                            
                            <div style="background: var(--background-color); padding: 20px; border-radius: var(--border-radius);">
                                <div style="font-weight: 600; margin-bottom: 10px;">Current Book:</div>
                                <div style="font-size: 1.2rem; color: var(--primary-color);" id="currentBook">None</div>
                                <div style="margin-top: 15px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>Progress:</span>
                                        <span id="bookProgress">0/0 chapters</span>
                                    </div>
                                    <div style="height: 6px; background: #e0e0e0; border-radius: 3px; overflow: hidden;">
                                        <div style="height: 100%; background: var(--primary-color); border-radius: 3px; width: 0%; transition: width 0.5s ease;" id="bookProgressBar"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">‚ö° Quick Actions</div>
                    </div>
                    <div class="card-content">
                        <button class="btn" style="width: 100%; margin-bottom: 10px;" id="quickBookmarkBtn">
                            üîñ Quick Bookmark
                        </button>
                        <button class="btn-secondary" style="width: 100%; margin-bottom: 10px;" id="shareProgressBtn">
                            üì§ Share Progress
                        </button>
                        <button class="btn-secondary" style="width: 100%;" id="readingPlanBtn">
                            üìö Start Plan
                        </button>
                    </div>
                </div>

                <!-- Theme Controls -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üé® Theme Controls</div>
                    </div>
                    <div class="card-content">
                        <div style="margin-bottom: 15px;">
                            <div style="font-weight: 600; margin-bottom: 10px;">Current Time: <span id="currentTime"></span></div>
                            <div style="font-size: 0.9rem; opacity: 0.7;">Theme updates automatically</div>
                        </div>
                        <button class="btn-secondary" style="width: 100%; margin-bottom: 10px;" id="manualThemeBtn">
                            üé® Manual Override
                        </button>
                        <button class="btn-secondary" style="width: 100%;" id="resetThemeBtn">
                            üîÑ Reset to Time
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === DYNAMIC BIBLE DATA ===
        class BibleData {
            constructor() {
                this.books = {
                    genesis: { chapters: 50, name: "Genesis" },
                    exodus: { chapters: 40, name: "Exodus" },
                    psalms: { chapters: 150, name: "Psalms" },
                    matthew: { chapters: 28, name: "Matthew" },
                    john: { chapters: 21, name: "John" },
                    romans: { chapters: 16, name: "Romans" }
                };

                // Sample verse data for demonstration
                this.verses = {
                    genesis: {
                        1: [
                            "1 In the beginning God created the heavens and the earth.",
                            "2 Now the earth was formless and empty, darkness was over the surface of the deep, and the Spirit of God was hovering over the waters.",
                            "3 And God said, \"Let there be light,\" and there was light.",
                            "4 God saw that the light was good, and he separated the light from the darkness.",
                            "5 God called the light \"day,\" and the darkness he called \"night.\" And there was evening, and there was morning‚Äîthe first day."
                        ],
                        2: [
                            "1 Thus the heavens and the earth were completed in all their vast array.",
                            "2 By the seventh day God had finished the work he had been doing; so on the seventh day he rested from all his work.",
                            "3 Then God blessed the seventh day and made it holy, because on it he rested from all the work of creating that he had done."
                        ]
                    },
                    psalms: {
                        23: [
                            "1 The Lord is my shepherd, I lack nothing.",
                            "2 He makes me lie down in green pastures, he leads me beside quiet waters,",
                            "3 he refreshes my soul. He guides me along the right paths for his name's sake.",
                            "4 Even though I walk through the darkest valley, I will fear no evil, for you are with me; your rod and your staff, they comfort me.",
                            "5 You prepare a table before me in the presence of my enemies. You anoint my head with oil; my cup overflows.",
                            "6 Surely your goodness and love will follow me all the days of my life, and I will dwell in the house of the Lord forever."
                        ]
                    },
                    john: {
                        3: [
                            "16 For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life.",
                            "17 For God did not send his Son into the world to condemn the world, but to save the world through him.",
                            "18 Whoever believes in him is not condemned, but whoever does not believe stands condemned already because they have not believed in the name of God's one and only Son."
                        ]
                    }
                };

                this.versions = {
                    niv: "New International Version",
                    esv: "English Standard Version", 
                    kjv: "King James Version",
                    nlt: "New Living Translation",
                    nasb: "New American Standard Bible"
                };
            }

            getBooks() {
                return this.books;
            }

            getChapters(book) {
                return this.books[book]?.chapters || 0;
            }

            getVerses(book, chapter) {
                return this.verses[book]?.[chapter] || ["Verse data not available for this chapter."];
            }

            getVersionName(version) {
                return this.versions[version] || version.toUpperCase();
            }
        }

        // === TIME-BASED THEME SYSTEM ===
        class ThemeSystem {
            constructor() {
                this.themes = ['dawn', 'morning', 'daylight', 'sunset', 'evening', 'night'];
                this.currentTheme = '';
                this.manualOverride = false;
                this.init();
            }

            init() {
                this.updateTimeBasedTheme();
                this.setupEventListeners();
                
                // Update theme every minute
                setInterval(() => {
                    if (!this.manualOverride) {
                        this.updateTimeBasedTheme();
                    }
                }, 60000);
            }

            updateTimeBasedTheme() {
                const now = new Date();
                const hour = now.getHours();
                let theme = '';

                if (hour >= 5 && hour < 8) theme = 'dawn';
                else if (hour >= 8 && hour < 12) theme = 'morning';
                else if (hour >= 12 && hour < 16) theme = 'daylight';
                else if (hour >= 16 && hour < 18) theme = 'sunset';
                else if (hour >= 18 && hour < 21) theme = 'evening';
                else theme = 'night';

                this.applyTheme(theme);
                this.updateTimeDisplay(now);
            }

            applyTheme(theme) {
                // Remove all theme classes
                document.body.classList.remove(...this.themes.map(t => `theme-${t}`));
                
                // Add current theme
                document.body.classList.add(`theme-${theme}`);
                this.currentTheme = theme;

                // Update indicator
                const indicator = document.getElementById('timeThemeIndicator');
                if (indicator) {
                    indicator.textContent = this.getThemeDisplayName(theme);
                    indicator.style.background = this.getThemeColor(theme);
                }
            }

            getThemeDisplayName(theme) {
                const names = {
                    dawn: 'üåÖ Dawn Theme',
                    morning: 'üåÑ Morning Theme', 
                    daylight: '‚òÄÔ∏è Daylight Theme',
                    sunset: 'üåá Sunset Theme',
                    evening: 'üåÜ Evening Theme',
                    night: 'üåô Night Theme'
                };
                return names[theme] || theme;
            }

            getThemeColor(theme) {
                const colors = {
                    dawn: '#ff9a76',
                    morning: '#4a6fa5',
                    daylight: '#27ae60',
                    sunset: '#e67e22',
                    evening: '#9b59b6',
                    night: '#2c3e50'
                };
                return colors[theme] || '#4a6fa5';
            }

            updateTimeDisplay(now) {
                const timeElement = document.getElementById('currentTime');
                if (timeElement) {
                    timeElement.textContent = now.toLocaleTimeString([], { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                }
            }

            cycleTheme() {
                const currentIndex = this.themes.indexOf(this.currentTheme);
                const nextIndex = (currentIndex + 1) % this.themes.length;
                this.manualOverride = true;
                this.applyTheme(this.themes[nextIndex]);
                this.showNotification(`Theme changed to ${this.getThemeDisplayName(this.themes[nextIndex])}`);
            }

            resetToTimeTheme() {
                this.manualOverride = false;
                this.updateTimeBasedTheme();
                this.showNotification('Theme reset to time-based mode');
            }

            setupEventListeners() {
                document.getElementById('themeCycleBtn')?.addEventListener('click', () => {
                    this.cycleTheme();
                });

                document.getElementById('resetThemeBtn')?.addEventListener('click', () => {
                    this.resetToTimeTheme();
                });

                document.getElementById('manualThemeBtn')?.addEventListener('click', () => {
                    this.cycleTheme();
                });
            }

            showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: var(--primary-color);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: var(--shadow);
                    z-index: 1000;
                    font-weight: 600;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // === INTERACTIVE BIBLE READER ===
        class BibleReader {
            constructor() {
                this.bibleData = new BibleData();
                this.currentBook = 'genesis';
                this.currentChapter = 1;
                this.currentVersion = 'niv';
                this.readingStats = {
                    versesRead: 0,
                    chaptersRead: 0,
                    bookmarks: 0,
                    readingTime: 0
                };
                this.init();
            }

            init() {
                this.loadReadingStats();
                this.setupEventListeners();
                this.populateChapterSelect();
                this.loadChapter();
                this.updateStatsDisplay();
            }

            setupEventListeners() {
                // Book selection
                document.getElementById('bookSelect').addEventListener('change', (e) => {
                    this.currentBook = e.target.value;
                    this.currentChapter = 1;
                    this.populateChapterSelect();
                    this.loadChapter();
                });

                // Chapter selection
                document.getElementById('chapterSelect').addEventListener('change', (e) => {
                    this.currentChapter = parseInt(e.target.value);
                    this.loadChapter();
                });

                // Version selection
                document.getElementById('versionSelect').addEventListener('change', (e) => {
                    this.currentVersion = e.target.value;
                    this.loadChapter();
                });

                // Navigation
                document.getElementById('prevChapter').addEventListener('click', () => {
                    this.previousChapter();
                });

                document.getElementById('nextChapter').addEventListener('click', () => {
                    this.nextChapter();
                });

                // Interactive buttons
                document.getElementById('dailyVerseBtn').addEventListener('click', () => {
                    this.showDailyVerse();
                });

                document.getElementById('audioPlayBtn').addEventListener('click', () => {
                    this.playAudio();
                });

                document.getElementById('randomChapterBtn').addEventListener('click', () => {
                    this.randomChapter();
                });

                document.getElementById('shareVerse').addEventListener('click', () => {
                    this.shareCurrentVerse();
                });

                document.getElementById('addBookmark').addEventListener('click', () => {
                    this.addBookmark();
                });

                document.getElementById('quickBookmarkBtn').addEventListener('click', () => {
                    this.addBookmark();
                });

                // Verse click handling
                document.getElementById('bibleContent').addEventListener('click', (e) => {
                    if (e.target.classList.contains('verse')) {
                        this.selectVerse(e.target);
                    }
                });
            }

            populateChapterSelect() {
                const chapterSelect = document.getElementById('chapterSelect');
                const chapterCount = this.bibleData.getChapters(this.currentBook);
                
                chapterSelect.innerHTML = '';
                for (let i = 1; i <= chapterCount; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `Chapter ${i}`;
                    if (i === this.currentChapter) {
                        option.selected = true;
                    }
                    chapterSelect.appendChild(option);
                }
            }

            loadChapter() {
                const verses = this.bibleData.getVerses(this.currentBook, this.currentChapter);
                const bookName = this.bibleData.books[this.currentBook].name;
                const versionName = this.bibleData.getVersionName(this.currentVersion);
                
                // Update display
                document.getElementById('chapterDisplay').textContent = 
                    `${bookName} ${this.currentChapter} (${versionName})`;
                
                document.getElementById('currentBook').textContent = bookName;

                // Render verses
                const content = document.getElementById('bibleContent');
                content.innerHTML = verses.map((verse, index) => `
                    <div class="verse" data-verse="${index + 1}">
                        <span class="verse-number">${index + 1}</span>
                        ${verse}
                    </div>
                `).join('');

                // Update stats
                this.readingStats.chaptersRead++;
                this.readingStats.versesRead += verses.length;
                this.updateStatsDisplay();
                this.saveReadingStats();
            }

            previousChapter() {
                if (this.currentChapter > 1) {
                    this.currentChapter--;
                    this.populateChapterSelect();
                    this.loadChapter();
                } else {
                    this.showNotification('This is the first chapter of this book');
                }
            }

            nextChapter() {
                const chapterCount = this.bibleData.getChapters(this.currentBook);
                if (this.currentChapter < chapterCount) {
                    this.currentChapter++;
                    this.populateChapterSelect();
                    this.loadChapter();
                } else {
                    this.showNotification('This is the last chapter of this book');
                }
            }

            selectVerse(verseElement) {
                // Remove active class from all verses
                document.querySelectorAll('.verse').forEach(v => v.classList.remove('active'));
                
                // Add active class to clicked verse
                verseElement.classList.add('active');
                
                const verseNumber = verseElement.dataset.verse;
                this.showNotification(`Selected verse ${verseNumber}`);
            }

            showDailyVerse() {
                const dailyVerses = [
                    { book: 'psalms', chapter: 23, verse: 1 },
                    { book: 'john', chapter: 3, verse: 16 },
                    { book: 'genesis', chapter: 1, verse: 1 }
                ];
                
                const randomVerse = dailyVerses[Math.floor(Math.random() * dailyVerses.length)];
                this.currentBook = randomVerse.book;
                this.currentChapter = randomVerse.chapter;
                
                document.getElementById('bookSelect').value = this.currentBook;
                this.populateChapterSelect();
                this.loadChapter();
                
                this.showNotification('üìñ Here is your daily verse!');
            }

            playAudio() {
                this.showNotification('üîä Playing audio Bible...');
                // In a real app, this would integrate with text-to-speech API
            }

            randomChapter() {
                const books = Object.keys(this.bibleData.books);
                const randomBook = books[Math.floor(Math.random() * books.length)];
                const chapterCount = this.bibleData.getChapters(randomBook);
                const randomChapter = Math.floor(Math.random() * chapterCount) + 1;
                
                this.currentBook = randomBook;
                this.currentChapter = randomChapter;
                
                document.getElementById('bookSelect').value = this.currentBook;
                this.populateChapterSelect();
                this.loadChapter();
                
                this.showNotification('üé≤ Exploring random chapter...');
            }

            shareCurrentVerse() {
                const bookName = this.bibleData.books[this.currentBook].name;
                const selectedVerse = document.querySelector('.verse.active');
                
                if (selectedVerse) {
                    const verseNumber = selectedVerse.dataset.verse;
                    const verseText = selectedVerse.textContent.replace(verseNumber, '').trim();
                    const shareText = `${bookName} ${this.currentChapter}:${verseNumber} - "${verseText}"`;
                    
                    this.showNotification('üì§ Verse ready to share!');
                    console.log('Share text:', shareText);
                    // In real app, this would use Web Share API
                } else {
                    this.showNotification('Please select a verse to share');
                }
            }

            addBookmark() {
                this.readingStats.bookmarks++;
                this.updateStatsDisplay();
                this.saveReadingStats();
                this.showNotification('üîñ Bookmark added!');
            }

            updateStatsDisplay() {
                document.getElementById('versesRead').textContent = this.readingStats.versesRead;
                document.getElementById('chaptersRead').textContent = this.readingStats.chaptersRead;
                document.getElementById('bookmarksCount').textContent = this.readingStats.bookmarks;
                document.getElementById('readingTime').textContent = Math.floor(this.readingStats.readingTime / 60);
                
                // Update progress
                const totalChapters = Object.values(this.bibleData.books).reduce((sum, book) => sum + book.chapters, 0);
                const completion = Math.min(100, Math.round((this.readingStats.chaptersRead / totalChapters) * 100));
                document.getElementById('completionPercentage').textContent = completion + '%';
                
                // Update book progress
                const book = this.bibleData.books[this.currentBook];
                document.getElementById('bookProgress').textContent = `${this.currentChapter}/${book.chapters}`;
                document.getElementById('bookProgressBar').style.width = `${(this.currentChapter / book.chapters) * 100}%`;
            }

            loadReadingStats() {
                const saved = localStorage.getItem('bibleReader_stats');
                if (saved) {
                    this.readingStats = { ...this.readingStats, ...JSON.parse(saved) };
                }
                
                // Start reading time counter
                setInterval(() => {
                    this.readingStats.readingTime++;
                    this.updateStatsDisplay();
                    this.saveReadingStats();
                }, 60000);
            }

            saveReadingStats() {
                localStorage.setItem('bibleReader_stats', JSON.stringify(this.readingStats));
            }

            showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: var(--primary-color);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: var(--shadow);
                    z-index: 1000;
                    font-weight: 600;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            const themeSystem = new ThemeSystem();
            const bibleReader = new BibleReader();
            
            console.log('üìñ Dynamic Bible Greeter initialized!');
        });
    </script>
</body>
</html>
